[목록](https://github.com/JungInBaek/TIL/blob/main/README.md)

# 컴퓨터 하드웨어의 구성

- 컴퓨터 시스템은 하드웨어와 소프트웨어로 구성된다.  
- 운영체제는 컴퓨터 하드웨어를 관리하는 소프트웨어이다.
- 하드웨어는 크게 프로세서, 메모리, 주변장치로 구성되고, 이들은 시스템 버스로 연결한다.



## 1. 프로세서
  프로세서(processor)는 컴퓨터 하드웨어에 부착한 모든 장치의 동작을 제어하고 명령을 실행한다.  
  중앙처리장치(CPU)라고도 한다. 프로세서는 연산장치와 제어장치, 레지스터로 구성되고, 이들은 내부 버스로 연결한다.  


  프로세서의 종류가 다양한 것처럼 레지스터의 종류와 크기도 다양하다.  
  레지스터는 여러 관점으로 구분할 수 있다. 용도에 따라 전용 레지스터와 범용 레지스터로 구분할 수 있고, 사용자가 정보를 변경할 수 있는지에 따라 사용자 가시(user-visible) 레지스터와 사용자 불가시(user-visible) 레지스터로 구분할 수 있다.  
  그리고 저장하는 정보의 종류에 따라 데이터 레지스터, 주소 레지스터, 상태 레지스터 등으로 세분화할 수 있다.  

  ### 사용자 가시 레지스터 : 사용자가 운영체제와 사용자 프로그램을 이용하여 정보를 변경할 수 있는 레지스터이다. 접근이 가능한 데이터와 주소, 일부 조건 코드를 보관한다.
  - 데이터 레지스터 : 함수 연산에 필요한 데이터를 저장한다. 값, 문자 등을 저장하고 산술, 논리 연산에 사용한다. 연산 결과로 플래그 값을 저장
  - 주소 레지스터 : 주소나 유효 주소를 계산하는데 필요한 주소의 일부분을 저장한다. 주소 레지스터에 저장한 값을 사용하여 산술 연산을 할 수 있다.
    - 기준 주소 레지스터 : 프로그램을 실행할 때 사용하는 기준 주소 값을 저장한다. 
    - 인덱스 레지스터 : 유효 주소를 계산하는데 사용하는 주소 정보를 저장한다.
    - 스택 포인터 레지스터 : 메모리에 프로세서 스택을 구현하는데 사용한다. 보통 반환 주소, 프로세서 상태 정보, 서브루틴의 임시 변수를 저장한다.

  ### 사용자 불가시 레지스터 : 사용자 불가시 레지스터는 사용자가 정보를 변경할 수 없는 레지스터이다. 프로세서의 상태와 제어를 관리한다.
  - 프로그램 카운터 : 다음에 실행할 명령어의 주소를 보관하는 레지스터이다.
  - 명령어 레지스터 : 현재 실행하는 명령어를 보관하는 레지스터이다.
  - 누산기 : 데이터를 일시적으로 저장하는 레지스터이다.
  - 메모리 주소 레지스터 : 프로세서가 참조하는 데이터의 주소를 명시하여 메모리에 접근하는 버퍼 레지스터이다.
  - 메모리 버퍼 레지스터 : 프로세서가 메모리에서 읽거나 메모리에 저장할 데이터 자체를 보관하는 버퍼 레지스터이다. 메모리 데이터 레지스터라고도 한다.  



## 2. 메모리  
  메모리는 컴퓨터 성능과 밀접하다. 속도가 빠른 메모리는 가격이 비싸서 보통은 메모리 계층 구조를 구성하여 비용, 속도, 용량, 접근시간 등을 상호 보완한다.  
  속도는 느리나 용량이 큰 보조기억장치부터 속도는 빠르나 용량이 작은 레지스터까지 메모리의 종류는 다양하다.  
  메모리 계층 구조는 비용, 속도, 크기(용량)가 다른 메모리를 효과적으로 사용함으로써 시스템의 성능을 향상시킨다.


    2-1. 레지스터
    프로세서 내부에 있으며, 프로세서가 사용할 데이터를 보관하는 가장 빠른 메모리이다.

    2-2. 메인 메모리
    프로세서 외부에 있으며, 프로세서에서 즉각적으로 수행할 프로그램과 데이터를 저장하거나 프로세서에서 처리한 결과를 메인 메모리에 저장한다. 입출력장치도 메인 메모리에서 데이터를 받거나 저장한다.

  메인 메모리는 다수의 셀(cell)로 구성되며, 각 셀은 비트로 구성된다.  
  셀이 K비트이면 셀에 2의 K승의 값을 저장할 수 있다. 셀은 주소로 참조한다.  

  컴퓨터에 주어진 주소를 물리적 주소라고 하는데, 프로그래머는 물리적 주소 대신 수식이나 변수를 사용한다. 그리고 컴파일러가 프로그램을 기계 명령어로 변환할 때 변수와 명령어에 주소를 할당하는데, 이 주소를 논리적 주소(가상 주소, 프로그램 주소)라고 한다. 컴파일로 논리적 주소를 물리적 주소로 변환하는데, 이 과정을 매핑 또는 메모리 맵이라고 한다.

  메모리 속도는 메모리 접근시간과 메모리 사이클 시간으로 표현할 수 있다.  
  - 메모리 접근 시간 : 명령이 발생한 후 목표 주소를 검색하여 데이터 쓰기(읽기)를 시작할 때까지 걸린 시간  
  - 메모리 사이클 시간 : 두 번의 연속적인 메모리 동작 사이에 필요한 최소 지연시간

메인 메모리는 프로세서와 보조기억장치 사이에 있으며, 여기서 발생하는 디스크 입출력 병목 현상을 해결하는 역할도 한다.

    2-3. 캐시
    프로세서 내부나 외부에 있으며, 처리 속도가 빠른 프로세서와 상대적으로 느린 메인 메모리의 속도 차이를 보완하는 고속 버퍼이다. 메인 메모리에서 데이터를 블록 단위로 가져와 프로세서에 워드 단위로 전달하여 속도를 높인다. 그리고 데이터가 이동하는 통로(대역폭)을 확대하여 프로세서와 메모리의 속도 차이를 줄인다.

캐시는 주소 영역을 한 번 읽어 들일 수 있는 크기로 나눈 후 각 블록에 번호를 부여하여 이 번호를 태그로 저장한다.  
프로세서는 메인 메모리에 접근하기 전에 캐시에 해당 주소의 자료가 있는지 먼저 확인한다.  
이를 위해 접근하려는 주소 24비트 중 태그에 해당하는 처음 22비트를 캐시의 모든 라인과 비교하여 일치하는 라인을 찾는다. 일치하는 라인이 있으면, 주소의 나머지 2비트를 이용하여 데이터 라인의 4개 바이트 중 해당하는 바이트를 가져온다.

캐시의 성능은 작은 용량의 캐시에 프로세서가 이후 참조할 정보가 얼마나 들어 있느냐로 좌우된다.  
프로세서가 참조하려는 정보가 있을 때를 캐시 적중(cache hit)이라 하고, 반대로 없을 때는 캐시 실패(cache miss)라고 한다.  
이 때 블록의 크기는 캐시의 성능으로 좌우되는데, 실제 프로그램을 실행할 때 참조한 메모리에 대한 공간적 지역성(국부성)과 시간적 지역성(국부성)이 있기 때문이다.

  - 공간적 지역성 : 대부분의 프로그램이 참조한 주소와 인접한 주소의 내용을 다시 참조하는 특성
  - 시간적 지역성 : 한 번 참조한 주소를 곧 다시 참조하는 특성

지역성은 블록이 크면 캐시의 히트율이 올라갈 수 있음을 의미하지만, 블록이 커지면 이에 따른 전송 부담과 캐시 데이터 교체 작업이 자주 일어나므로 블록 크기를 무작정 늘릴 수는 없다.

    2-4. 보조기억장치
    주변장치 중 프로그램과 데이터를 저장하는 하드웨어로, 2차 기억장치 또는 외부기억장치라고도 한다. 자기디스크, 광디스크, 자기테이프 등이 있다.


## 3. 시스템 버스
  시스템 버스는 하드웨어를 물리적으로 연결하여 서로 데이터를 주고받을 수 있게 하는 통로이다.  
  컴퓨터 내부의 다양한 신호(데이터 입출력 신호, 프로세서 상태 신호, 인터럽트 요구와 허가 신호, 클록 신호 등)를 시스템 버스로 전달한다. 시스템 버스는 기능에 따라 데이터 버스, 주소 버스, 제어 버스로 구분한다.

  - 데이터 버스 : 프로세서와 메인 메모리, 주변장치 사이에서 데이터를 전송한다. 데이터 버스를 구성하는 배선 수는 프로세서가 한 번에 전송할 수 있는 비트 수를 결정하는데, 이를 워드라고 한다.
  - 주소 버스 : 프로세서가 시스템의 구성 요소를 식별하는 주소 정보를 전송한다. 주소 버스를 구성하는 배선 수는 프로세서와 접속할 수 있는 메인 메모리의 최대 용량을 결정한다.
  - 제어 버스 : 프로세서가 시스템의 구성 요소를 제어하는데 사용한다. 제어 신호로 연산장치의 연산 종류와 메인 메모리의 읽기나 쓰기 동작을 결정한다.


### 4. 주변 장치
  주변 장치는 프로세서와 메인 메모리를 제외한 나머지 하드웨어 구성요소이다. 단순히 입출력장치라고도 하나, 크게 입력장치, 출력장치, 저장장치로 구분한다.
  - 입력장치 : 컴퓨터에서 처리할 데이터를 외부에서 입력하는 장치이다.
  - 출력장치 : 입력장치와 반대로 컴퓨터에서 처리한 데이터를 외부로 보내는 장치이다.
  - 저장장치 : 메인 메모리와 달리 거의 영구적으로 데이터를 저장하는 장치이다. 데이터를 입력하여 저장하며, 저장한 데이터를 출력하는 공간이므로 입출력장치에 포함되기도 한다.